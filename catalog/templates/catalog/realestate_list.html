{% extends "base_generic.html" %}

{% load filters %}

{% block content %}
    <h1>Casas para alugar</h1>

    <form action="" method="post">
        {% csrf_token %}
        <table>
        Pesquisar
        {{ form }}
        km de distância desse endereço 
        </table>
        <input type="submit" value="Submit" />
    </form>

    {% if object_list %}
    <ul>

      {% for house in object_list %}
        {% house_distance house as house_distance %}
        {% if house_distance  < distance %}
        <li>
          <a href="{{ house.get_absolute_url }}">{{ house.address }}</a> ({{house.owner}})
          <p>Distância: {{house_distance|floatformat:1 }} km</p>
        </li>
        {% endif %}
      {% endfor %}

    </ul>
    {% else %}
      <p>Não existem casas cadastradas.</p>
    {% endif %}       
{% endblock %}